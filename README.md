
# gtgen

![GitHub Workflow Status](https://img.shields.io/github/workflow/status/Torimune29/gtgen/CI)
[![codecov](https://codecov.io/gh/Torimune29/gtgen/branch/main/graph/badge.svg)](https://codecov.io/gh/Torimune29/gtgen)
[![Codacy Badge](https://app.codacy.com/project/badge/Grade/4ab150dd86c44db9ba17df846aa309a3)](https://www.codacy.com/gh/Torimune29/gtgen/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=Torimune29/dev-cpp-oss-template&amp;utm_campaign=Badge_Grade)
![CodeQL](https://github.com/Torimune29/gtgen/workflows/CodeQL/badge.svg)

## How to Build

- Requirement
  - libclang-header (like libclang-dev on Ubuntu20.04)

## How to Use

- Sample Output

```
gtgen/build$ ./gtgen -f ../tests/testdata/MockGenerate.h -p . --mock --mock-label=gtgen_Mock_
// This code was generated by gtgen 0.0.1
#pragma once

#include <gmock/gmock.h>

class gtgen_Mock_foo {
  MOCK_CONST_METHOD0(const_function, void());
  MOCK_CONST_METHOD0(noise_suffix, void());
  MOCK_METHOD0(virtual_function, void());
  MOCK_CONST_METHOD0(pure_virtual, void());
  MOCK_METHOD0(with_definition, void());
  MOCK_METHOD0(public_function, void());
  MOCK_METHOD1(overload, int(int));
  MOCK_METHOD1(overload, int(double));
  MOCK_CONST_METHOD1(overload, int(int));
};
class gtgen_Mock_bar : public foo<int> {
  MOCK_METHOD0(virtual_function, void());
  MOCK_CONST_METHOD0(pure_virtual, void());
};
class gtgen_Mock_baz {
  MOCK_METHOD0(struct_function, void());
};
class gtgen_Mock_fizz {
class gtgen_Mock_buzz {
  MOCK_METHOD0(inner_class_func, void());
};
};
namespace n3 {
namespace n3_1 {
class gtgen_Mock_fizz {
class gtgen_Mock_buzz {
  MOCK_METHOD0(inner_class_func, void());
};
};
};
class gtgen_Mock_fizz {
class gtgen_Mock_buzz {
  MOCK_METHOD0(inner_class_func, void());
};
};
};

~/gtgen/build$ ./gtgen -f ../tests/testdata/MockGenerate.h -p . --view-functions
{
    "notice": "This code was generated by gtgen 0.0.1",
    "function": [],
    "memberFunction": [
        {
            "base": {
                "functionName": "const_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "volatile_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": true,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "full_suffix",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": true,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": true,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "noise_suffix",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "virtual_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": true,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "pure_virtual",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": false,
            "polymorphicMemberFunction": true,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "with_definition",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "deleted",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": true
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "private_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 1,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "private_function_2",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 1,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "protected_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 2,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "public_function",
                "signature": "()",
                "parameters": [],
                "scope": ["foo"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "overload",
                "signature": "(int)",
                "parameters": ["int"],
                "scope": ["foo"],
                "returnType": "int",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "overload",
                "signature": "(double)",
                "parameters": ["double"],
                "scope": ["foo"],
                "returnType": "int",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "overload",
                "signature": "(int)",
                "parameters": ["int"],
                "scope": ["foo"],
                "returnType": "int",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "overload",
                "signature": "(int)",
                "parameters": ["int"],
                "scope": ["foo"],
                "returnType": "int",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": true,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "overload",
                "signature": "(int)",
                "parameters": ["int"],
                "scope": ["foo"],
                "returnType": "int",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "foo",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": true,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "virtual_function",
                "signature": "()",
                "parameters": [],
                "scope": ["bar"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "bar",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": true,
            "baseClasses": ["foo<int>"]
        },
        {
            "base": {
                "functionName": "pure_virtual",
                "signature": "()",
                "parameters": [],
                "scope": ["bar"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "bar",
            "accessSpecifier": 0,
            "constMemberFunction": true,
            "volatile": false,
            "polymorphicMemberFunction": true,
            "baseClasses": ["foo<int>"]
        },
        {
            "base": {
                "functionName": "struct_function",
                "signature": "()",
                "parameters": [],
                "scope": ["baz"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "baz",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "inner_class_func",
                "signature": "()",
                "parameters": [],
                "scope": ["fizz", "buzz"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "buzz",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "inner_class_func",
                "signature": "()",
                "parameters": [],
                "scope": ["n3", "n3_1", "fizz", "buzz"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "buzz",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        },
        {
            "base": {
                "functionName": "inner_class_func",
                "signature": "()",
                "parameters": [],
                "scope": ["n3", "fizz", "buzz"],
                "returnType": "void",
                "noexcept": false,
                "constexpr": false,
                "consteval": false,
                "deleted": false
            },
            "className": "buzz",
            "accessSpecifier": 0,
            "constMemberFunction": false,
            "volatile": false,
            "polymorphicMemberFunction": false,
            "baseClasses": []
        }
    ]
}

~gtgen/build$ ./gtgen -f ../tests/testdata/MockGenerate.h -p . --view-scopes
{
    "notice": "This code was generated by gtgen 0.0.1",
    "scopeRelations": [
        {
            "name": "foo",
            "kind": 3,
            "fullName": ["foo"],
            "children": []
        },
        {
            "name": "bar",
            "kind": 3,
            "fullName": ["bar"],
            "children": []
        },
        {
            "name": "baz",
            "kind": 3,
            "fullName": ["baz"],
            "children": []
        },
        {
            "name": "fizz",
            "kind": 3,
            "fullName": ["fizz"],
            "children": [
                {
                    "name": "buzz",
                    "kind": 3,
                    "fullName": ["fizz", "buzz"],
                    "children": []
                }
            ]
        },
        {
            "name": "n3",
            "kind": 1,
            "fullName": ["n3"],
            "children": [
                {
                    "name": "n3_1",
                    "kind": 1,
                    "fullName": ["n3", "n3_1"],
                    "children": [
                        {
                            "name": "fizz",
                            "kind": 3,
                            "fullName": ["n3", "n3_1", "fizz"],
                            "children": [
                                {
                                    "name": "buzz",
                                    "kind": 3,
                                    "fullName": ["n3", "n3_1", "fizz", "buzz"],
                                    "children": []
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "fizz",
                    "kind": 3,
                    "fullName": ["n3", "fizz"],
                    "children": [
                        {
                            "name": "buzz",
                            "kind": 3,
                            "fullName": ["n3", "fizz", "buzz"],
                            "children": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "n3_1",
            "kind": 1,
            "fullName": ["n3", "n3_1"],
            "children": [
                {
                    "name": "fizz",
                    "kind": 3,
                    "fullName": ["n3", "n3_1", "fizz"],
                    "children": [
                        {
                            "name": "buzz",
                            "kind": 3,
                            "fullName": ["n3", "n3_1", "fizz", "buzz"],
                            "children": []
                        }
                    ]
                }
            ]
        }
    ]
}
~

```

## How to Develop

This uses a OSS Development Template for C++ projects based on [cpp-project](https://github.com/bsamseth/cpp-project), and [dev-cpp-oss-template](https://github.com/Torimune29/dev-cpp-oss-template).
